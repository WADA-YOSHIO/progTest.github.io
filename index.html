<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="theme-color" content="#000000">
        <link rel="stylesheet" href="index.css">
    </head>
    <body>

        <h1>じゃんけん大会</h1>
        <h2>１０円入れる</h2>
        
        <script src="script.js"></script>
         
        <img class="picture"id="image_Place"src="https://raw.githubusercontent.com/WADA-YOSHIO/progTest.github.io/main/pic_1.png">
     
        <a type="button"class="box3"id="gameStart"value="gameStart"onclick="rockPaperScissors()">GAME START</a>  
      
        <button type="button"class="box4"id="paper"value="paper"onclick="stop(this.value)">paper</button>  
        <button type="button"class="box4"id="rock"value="rock"onclick="stop(this.value)">rock</button>  
        <button type="button"class="box4"id="scissors"value="scissors"onclick="stop(this.value)">scissors</button>  
     
        <div class="box"id="logOne">N1</div>
        <div class="box"id="logTwo">N2</div>
        <div class="box"id="logThree">N3</div>
      
        <div class="box2"id="victoryOfDefeatOne">00</div>
        <div class="box2"id="victoryOfDefeatTwo">00</div>
        <div class="box2"id="victoryOfDefeatThree">00</div>
    
        <button type="button"class="box5"id="machineRandam"value="machineRandam"onclick="changeImg ()">machine Randam</button>

        <div class="box6"id="logTimeOne">00</div>
        <div class="box6"id="logTimeTwo">00</div>
        <div class="box6"id="logTimeThree">00</div>
    </body>

    <script type="text/javascript">
// 1行目に記載している 'use strict' は削除しないでください
'use strict'

console.log("--------------------------------------");
console.log("HTML関係");
console.log("--------------------------------------");

const h1 = document.getElementsByTagName("h1")[0];
h1.style.backgroundColor ="yellow";
h1.style.color = "red";
h1.style.textAlign = "center";
const h2 = document.getElementsByTagName("h2")[0];
h2.style.textAlign = "center";

console.log("--------------------------------------");
console.log("rockPaperScissors");
console.log("--------------------------------------");

let you = "";
let stopNumber = -1;
console.log("FirstCondition: " + stopNumber);

function stop(youValue) {
    you = youValue;
    stopNumber = 0;
    console.log("you: " + you, "stopNumber: " + stopNumber);

    // target = document.getElementById("anime_test");
    // if (target.className == null || target.className=="") {
    //   target.className = "active";
    // } else {
    //   target.className = "";


    return you, stopNumber;
}

let count = 0;

function rockPaperScissors() {
    const t0 = performance.now();
    let machine = " ";
    let victoryOfDefeat = " ";
    let t2 =0;
    const result = document.getElementsByClassName("box2");
    const cycle = document.getElementsByClassName("box6");  
    machine = randam();   
    if (typeof machine !== "undefined") {
        if (you === machine) {
            victoryOfDefeat = "rockPaperScissors";
        } else if (you === "paper" && machine === "rock" || you === "rock" && machine === "scissors" || you === "scissors" && machine === "paper") {
            victoryOfDefeat = "YOU WIN !";           
        } else {
            victoryOfDefeat = "YOU LOSE!";           
        }
        const t1 = performance.now();
        t2 = t1 - t0;
    }
    stopNumber = -1;
    console.log("you: " + you + " machine: " + machine + " " + victoryOfDefeat + " " + "stopNumber: " + stopNumber);
    console.log("count befor if: ", count);
    if ( count < 3 ){
        result[count].innerText = victoryOfDefeat;
        cycle[count].innerText = t2.toFixed(2);
        count +=1;
        console.log("call to :"+ t2 +"millisseconds")
        console.log("count after if: ", count);
    }else if ( count === 3 ){
        count = 0;
        console.log("count reset: ", count);
        result[count].innerText = victoryOfDefeat;
        cycle[count].innerText = t2.toFixed(2);
        count +=1;
    }else{
        console.log("WHY");
    }
    return alert(victoryOfDefeat); 
}

function randam() {
    let stopNumberTwo = -1;
    stopNumberTwo = stopNumber;
    let comment = ["Why", "paper", "rock", "scissors"]
    if (ind < 4) {
        console.log("stopNumberTwo: ", stopNumberTwo);
        if (stopNumberTwo === 0) {
            // choice(ind);
            return comment[ind];
        } 
    }
}

let ind = 0;
let i = 0; 

function changeImg (){ 
    if ( i === 4 ){
        ind = 0;
        i = 0;
    }
    ind++ ;
    console.log(ind)
    let img = document.getElementById("image_Place");
    img.src = "pic_" + ind + ".png"
    console.log(img);
    i = ind + 1;
}
    </script>
